<app-modal *ngIf="this.modalService.getVisibility()"></app-modal>
<div class="container mx-auto">
  <app-spinner *ngIf="this.loaderService.getLoading(); else contentBlock"></app-spinner>
  <ng-template #contentBlock>

    <table class="min-w-full bg-white dark:bg-gray-800">
      <thead>
      <tr class="w-full h-16 border-gray-300 border-b py-8">
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Cargo Type</th>
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Amount</th>
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Trailer</th>
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Truck</th>
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Driver</th>
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Pickup Address</th>
        <th class="text-gray-600 dark:text-gray-400 font-normal pr-6 text-left text-sm tracking-normal leading-4 mx-auto">Drop Address</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let s of this.sets; let i = index" class="border-b border-gray-300 h-24 ">
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <p class="text-gray-700">{{s.cargo.name}}</p>
        </td>
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <p class="text-gray-700">{{s.amount}} {{s.cargo.unit}}</p>
        </td>
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <select class="border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"
                  [(ngModel)]="s.trailer">
            <option *ngFor="let d of this.trailers" [ngValue]="d">{{d.plate}} ({{d.carrying_capacity}} {{s.cargo.unit}})</option>
          </select>
          <p class="text-gray-700"></p>
        </td>
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <select class="border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"
                  [(ngModel)]="s.truck">
            <option *ngFor="let d of this.trucks" [ngValue]="d">{{d.plate}}</option>
          </select>
        </td>
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <select class="border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"
                  [(ngModel)]="s.driver">
            <option *ngFor="let d of this.drivers.get(s.cargo.required_licence)" [ngValue]="d">{{d.name}}</option>
          </select>
        </td>
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <select class="border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"
                  [(ngModel)]="s.pickup_address">
            <option *ngFor="let d of this.addresses" [ngValue]="d">{{d.street}}, {{d.city}}</option>
          </select>
        </td>
        <td class="text-sm pr-6 whitespace-no-wrap text-gray-800 dark:text-gray-100 tracking-normal leading-4 mx-auto">
          <select class="border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"
                  [(ngModel)]="s.drop_address">
            <option *ngFor="let d of this.addresses" [ngValue]="d">{{d.street}}, {{d.city}}</option>
          </select>
        </td>
      </tr>
      </tbody>
    </table>
  </ng-template>
</div>
